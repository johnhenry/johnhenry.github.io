---
// Settings
import {
  SITE_TITLE,
  SITE_KEYWORDS,
  SITE_DESCRIPTION,
  SITE_AUTHOR,
  SITE_CANONICAL_URL} from "../../../SETTINGS.mjs";
// Utilities
import sortPosts from "../../../utils/sort-posts.mjs";
// Components
import JH from "../../../components/jh/index.astro";
import SitePage from "../../../components/SitePage.astro";
import BlogPreview from "../../../components/BlogPreview.astro";
// Content;
import headerLinks from "../../../content/headerlinks.mjs";
const { tag } = Astro.params;
const { posts } = Astro.props;
// Misc.
export async function getStaticPaths() {
const { byTag } =
    sortPosts(
      await Astro
      .glob('../posts/*.md'));
    return byTag.map(([tag, posts]) => ({
      params: { tag },
      props: {
        posts,
        tag
      }
    }));
}
---
<SitePage
  title={`Blog -- [${tag}]`}
  description={SITE_DESCRIPTION}
  keywords={SITE_KEYWORDS}
  author={SITE_AUTHOR}
  canonical={SITE_CANONICAL_URL}
  headerLinks={headerLinks}>
  <section class="blog-top">
    <header>
      <JH class="logo"/>
    </header>
    <header>
      <p>
        [{tag}]
      </p>
    </header>
    <p>This is the place where I muse about technology.</p>
  </section>
  {posts.map(({url, frontmatter:{date, title, description, heroImage, author, tags}}) =>
  <BlogPreview
  url={url}
  date={date}
  title={title}
  heroImage={heroImage}
  description={description}
  author={author}
  tags={tags}
/>)}
</SitePage>
